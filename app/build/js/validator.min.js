function test(a,b,c,d){var e={whiteList:"",blackList:"",structure:""};try{this.parsedCode=esprima.parse(a)}catch(f){return!1}return this.whiteList=b,this.blackList=c,this.structure=d,this.regexCode=this.__getCodeinRegex(this.parsedCode),e.whiteList=this.testWhiteList(),e.blackList=this.testBlackList(),e.structure=this.testStructure(),e}function testWhiteList(){for(var a=[],b=0;b<this.whiteList.length;b++)-1===this.regexCode.indexOf(this.whiteList[b])?a.push({name:this.whiteList[b],result:"fail"}):a.push({name:this.whiteList[b],result:"success"});return a}function testBlackList(){for(var a=[],b=0;b<this.blackList.length;b++)-1!==this.regexCode.indexOf(this.blackList[b])?a.push({name:this.blackList[b],result:"fail"}):a.push({name:this.blackList[b],result:"success"});return a}function testStructure(){for(var a=[],b=0;b<this.structure.length;b++){var c=this.structure[b].split(" ");__testStructureMatch(this.regexCode,c)?a.push({name:this.structure[b],result:"success"}):a.push({name:this.structure[b],result:"fail"})}return a}function __testStructureMatch(a,b){for(var c=a.split(" "),d=!1,e=[],f=b.length,g=0,h=0;g<c.length;g++)if(c[g]==b[h]&&(d=!0,"{"!==b[h]&&"}"!==b[h]&&e.push(c[g]),h++),d&&"}"===c[g]&&("{"==e.slice(-1)&&e.slice(-1,1),"{"!=e.slice(-1)&&(e.slice(-1,1),h-=2)),d&&"{"===c[g]&&e.push(c[g]),h==f)return!0;return!1}function __getCodeinRegex(a){var b=[];if(a)if(a.body){var c=a.body;a.body.body&&(c=a.body.body);for(var d=0;d<c.length;d++){b.push(c[d].type),b.push("{");for(var e in c[d])c[d].hasOwnProperty(e)&&null!==c[d][e]&&"object"==typeof c[d][e]&&b.push(__getCodeinRegex(c[d][e]));b.push("}")}}else for(var e in a)a.hasOwnProperty(e)&&null!==a[e]&&"object"==typeof a[e]&&b.push(__getCodeinRegex(a[e]));return b.join(" ")}var validator={__getCodeinRegex:__getCodeinRegex,test:test,testBlackList:testBlackList,testWhiteList:testWhiteList,testStructure:testStructure};